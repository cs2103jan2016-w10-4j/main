# A0149174Y
###### W10-4J\Handler\ArraylistStorage.java
``` java
	private boolean taskSearchNameAndDetails(Task eachTask, String[] task) {
		assert eachTask.getName() != null : Constants.ASSERT_TASKNAME_EXISTENCE;
		assert eachTask.getDetails() != null : Constants.ASSERT_TASKDETAILS_EXISTENCE;
		boolean searchStringFound = false;
		String[] splitName = eachTask.getName().toLowerCase().split("\\s+");
		String[] splitDetails = eachTask.getDetails().toLowerCase().split("\\s+");
		searchStringFound = searchInName(task, searchStringFound, splitName);
		searchStringFound = searchInDetails(task, searchStringFound, splitDetails);
		return searchStringFound;
	}

	private boolean searchInName(String[] task, boolean searchStringFound, String[] splitName) {
		for (int i = 0; i < splitName.length; i++) {
			searchStringFound = checkSplitStringForAMatch(task, searchStringFound, splitName, i);
		}
		return searchStringFound;
	}

	private boolean searchInDetails(String[] task, boolean searchStringFound, String[] splitDetails) {
		for (int i = 0; i < splitDetails.length; i++) {
			searchStringFound = checkSplitStringForAMatch(task, searchStringFound, splitDetails, i);
		}
		return searchStringFound;
	}

	private boolean taskSearchName(Task eachTask, String[] task) {
		assert eachTask.getName() != null : Constants.ASSERT_TASKNAME_EXISTENCE;
		boolean searchStringFound = false;
		String[] splitName = eachTask.getName().toLowerCase().split("\\s+");
		searchStringFound = searchInName(task, searchStringFound, splitName);
		return searchStringFound;
	}

	private boolean checkSplitStringForAMatch(String[] task, boolean searchStringFound, String[] split, int i) {
		if (split[i].startsWith(task[0].trim().toLowerCase())) {
			searchStringFound = true;
		}
		return searchStringFound;
	}

```
###### W10-4J\Handler\Command.java
``` java
package Handler;

import Handler.HandlerMemory.COMMAND_STATE;
import main.Task;

public interface Command {
	
	String execute(String[] task);
```
###### W10-4J\Handler\Handler.java
``` java
	public String executeCommand(COMMAND_TYPE command, String[] task) {
		try {
			Command cmd = getCommand(command, task);
			return cmd.execute(task);
		} catch (IllegalArgumentException invalidCommandFormat) {
			return Constants.MESSAGE_INVALID_FORMAT;
		} catch (IllegalStateException unrecognizedCommand) {
			return Constants.MESSAGE_UNRECOGNISED_COMMAND;
		}
	}

	private Command getCommand(COMMAND_TYPE command, String[] task)
			throws IllegalArgumentException, IllegalStateException {

		switch (command) {
		case ADD:
			return addTask;
		case EDIT:
			return editTask;
		case DELETE:
			return deleteTask;
		case DONE:
			return doneTask;
		case DISPLAY:
			return displayTask;
		case SEARCH:
			return searchTask;
		case SETDIR:
			return setDirTask;
		case RETRIEVE:
			return retrieveTask;
		case RECURRENCE:
			return recurrTask;
		case UNDO:
			return undoTask;
		case HELP:
			return helpTask;
		case EXIT:
			System.exit(0);
		case INVALID:
			throw new IllegalArgumentException();
		default:
			throw new IllegalStateException();
		}
	}
```
###### W10-4J\test\AddTest.java
``` java
public class AddTest {
	private ArraylistStorage arraylistStorage = new ArraylistStorage();
	private Add addTask = new Add(arraylistStorage);

	@Test
	public void test() {
		
		String task1[]={"test1","2016/03/22","09:00","21:00","None"};
		String task2[]={"test2","2016/02/23","00:00","10:00","None"};
				
				// test the delete method
				assertEquals(String.format(Constants.MESSAGE_ADD_PASS,"test1"), addTask.execute(task1));
				assertEquals(String.format(Constants.MESSAGE_ADD_PASS,"test2"), addTask.execute(task2));
				assertEquals("test2",arraylistStorage.getNotDoneStorage().get(arraylistStorage.getNotDoneStorage().size()-1).getName());
				assertEquals("test1",arraylistStorage.getNotDoneStorage().get(arraylistStorage.getNotDoneStorage().size()-2).getName());

	}

}
```
###### W10-4J\test\DoneTest.java
``` java
public class DoneTest {

	private ArraylistStorage arraylistStorage = new ArraylistStorage();
	private Add addTask = new Add(arraylistStorage);
	private Done doneTask = new Done(arraylistStorage);
	
	@Test
	public void test() {
		String task1[]={"test1","2016/03/22","09:00","21:00","None"};
		String task2[]={"test2","2016/02/23","00:00","10:00","None"};
		addTask.execute(task1);
		addTask.execute(task2);
		String doneTask1[]={"1"};
		assertEquals(String.format(Constants.MESSAGE_DONE_PASS, "test1"),doneTask.execute(doneTask1));
		assertTrue(arraylistStorage.getDoneStorage().get(0).getName()=="test1");
		assertTrue(arraylistStorage.getNotDoneStorage().get(0).getName()=="test2");
	}

}
```
###### W10-4J\test\SystemTest.java
``` java
public class SystemTest {	
	
	@Test
	public void testRobot(){
		String []output;
		String userInput;
		
		userInput="setdir C:\\";
		output=UserInterface.initComponents(userInput);
		
		userInput = "";
		output=UserInterface.initComponents(userInput);
	
	System.out.println(output[0]);
	System.out.println(output[1]);
	
}

@Test
public void test1() {
	String userInput;
	String []output;
	
	userInput="setdir C:\\";
	output=UserInterface.initComponents(userInput);
	assertEquals(output[0],"<html>\n  <head>\n    <style type=\"text/css\">\n      <!--\n        #underline { border-bottom-color: black; border-bottom-style: solid; border-bottom-width: 3px }\n      -->\n    </style>\n    \n  </head>\n  <body>\n    <h1>\n      <b>No tasks on hand!</b>\n    </h1>\n  </body>\n</html>\n");
	assertEquals(output[1],"> setdir C:\\\n> Set directory successful.\n");
	
	userInput = "";
	output=UserInterface.initComponents(userInput);
	assertEquals(output[0],"<html>\n  <head>\n    <style type=\"text/css\">\n      <!--\n        #underline { border-bottom-color: black; border-bottom-style: solid; border-bottom-width: 3px }\n      -->\n    </style>\n    \n  </head>\n  <body>\n    <center>\n      <b>Welcome to Docket! </b>\n    </center>\n    <br>\n    \n\n    <center>\n      To start, enter a task in the command field below.\n    </center>\n    <br>\n    \n\n    <center>\n      For help, enter <b>help</b> in the command field below.\n    </center>\n    <br>\n    \n\n    <center>\n      <b>Tips</b>\n    </center>\n    <br>\n    \n\n    <center>\n      Use Arrow Up or Arrow Down key to scroll through previous commands \n      entered\n    </center>\n  </body>\n</html>\n");
	assertEquals(output[1],"> setdir C:\\\n> Set directory successful.\n\n> Invalid command format\n");
	
	userInput = "add";
	output=UserInterface.initComponents(userInput);
	//assertEquals(output[0],);
	//assertEquals(output[1],);
	
	userInput="add V0.44";
	output=UserInterface.initComponents(userInput);
	//assertEquals(output[0],);
		//assertEquals(output[1],);
	
	userInput="delete 10";
	output=UserInterface.initComponents(userInput);
	//assertEquals(output[0],);
		//assertEquals(output[1],);
	
	userInput="delete 1";
	output=UserInterface.initComponents(userInput);
	//assertEquals(output[0],);
		//assertEquals(output[1],);
	
	userInput="add V0.4";
	output=UserInterface.initComponents(userInput);
	//assertEquals(output[0],);
		//assertEquals(output[1],);
	
	userInput="add V0.5 Manual date 11.04.2016 endtime 23:59";
	output=UserInterface.initComponents(userInput);
	//assertEquals(output[0],);
		//assertEquals(output[1],);
	
	userInput="add V0.5 Demo date 13.04.2016 starttime 10";
	output=UserInterface.initComponents(userInput);
	//assertEquals(output[0],);
		//assertEquals(output[1],);
	
	userInput="search v";
	output=UserInterface.initComponents(userInput);
	//assertEquals(output[0],);
			//assertEquals(output[1],);
	
	userInput="search demo";
	output=UserInterface.initComponents(userInput);
	//assertEquals(output[0],);
			//assertEquals(output[1],);
	
	userInput="add overdue task date 11.04.2015";
	output=UserInterface.initComponents(userInput);
	//assertEquals(output[0],);
			//assertEquals(output[1],);
	
	userInput = "display overdue";
	output=UserInterface.initComponents(userInput);
	//assertEquals(output[0],);
	//assertEquals(output[1],);
	
	userInput="done 1";
	output=UserInterface.initComponents(userInput);
	//assertEquals(output[0],);
		//assertEquals(output[1],);
	
	userInput = "display done";
	output=UserInterface.initComponents(userInput);
	//assertEquals(output[0],);
	//assertEquals(output[1],);
	
	userInput = "display today";
	output=UserInterface.initComponents(userInput);
	//assertEquals(output[0],);
	//assertEquals(output[1],);
	
	userInput = "display";
	output=UserInterface.initComponents(userInput);
	//assertEquals(output[0],);
	//assertEquals(output[1],);
	
	userInput = "edit";
	output=UserInterface.initComponents(userInput);
	//assertEquals(output[0],);
	//assertEquals(output[1],);
	
	userInput="edit 2 details wear smart casual";
	output=UserInterface.initComponents(userInput);
	//assertEquals(output[0],);
	//assertEquals(output[1],);
	
	userInput="undo";
	output=UserInterface.initComponents(userInput);
	//assertEquals(output[0],);
		//assertEquals(output[1],);
	
	userInput="help";
	output=UserInterface.initComponents(userInput);
	//assertEquals(output[0],);
		//assertEquals(output[1],);
	
	userInput="alias add a";
	output=UserInterface.initComponents(userInput);
	//assertEquals(output[0],);
		//assertEquals(output[1],);
	
	userInput="a check mail repeat day";
	output=UserInterface.initComponents(userInput);
	//assertEquals(output[0],);
		//assertEquals(output[1],);
	
	userInput="setdir D:\\";
	output=UserInterface.initComponents(userInput);
	//assertEquals(output[0],);
		//assertEquals(output[1],);
	
	userInput="get C:\\dirdefaultfile.txt";
	output=UserInterface.initComponents(userInput);
	//assertEquals(output[0],);
		//assertEquals(output[1],);
	
	userInput = "ls";
	output=UserInterface.initComponents(userInput);
	//assertEquals(output[0],);
	//assertEquals(output[1],);
	
	} 
}
```
###### W10-4J\test\UndoTest.java
``` java
public class UndoTest {

	private ArraylistStorage arraylistStorage = new ArraylistStorage();
	private Add addTask = new Add(arraylistStorage);
	private Undo undoTask;
	
	@Test
	public void test() {
		String task1[]={"test1","2016/03/22","09:00","21:00","None"};
		String task2[]={"test2","2016/02/23","00:00","10:00","None"};
		addTask.execute(task1);
		assertEquals("test1",arraylistStorage.getPreviousInputStorage().get(0).getTask().getName());
		assertEquals("add",arraylistStorage.getPreviousInputStorage().get(0).getAction());
		addTask.execute(task2);
		assertEquals("test2",arraylistStorage.getPreviousInputStorage().get(0).getTask().getName());
		assertEquals("add",arraylistStorage.getPreviousInputStorage().get(0).getAction());
		
		// test undo
		undoTask = new Undo(arraylistStorage);
		assertEquals(Constants.MESSAGE_UNDO_PASS,undoTask.execute(null));
		assertTrue(arraylistStorage.getNotDoneStorage().get(arraylistStorage.getNotDoneStorage().size()-1).getName()!="test2");
		assertTrue(arraylistStorage.getNotDoneStorage().get(arraylistStorage.getNotDoneStorage().size()-1).getName()=="test1");
	}
}
```
